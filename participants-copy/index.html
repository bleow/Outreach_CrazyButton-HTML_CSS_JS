<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Crazy Button Workshop</title>
  </head>

  <!-- start of helper functions -->
  <script>
    function clearPlayerList() {
      // clear player list
      console.log("[TODO] Clear player list")
    }

    function drawPlayerList(playerListData) {
      // Draw all players in room (make sure to tag yourself :D)
      console.log("[TODO] Draw all players in room")
    }

    function reDrawPlayerList(playerListData) {
      // clear and draw player list
      console.log("[TODO] Clear and draw player list")
    }

    // given randomTop and randomLeft values,
    // move button to new location using random values
    function moveButtonToLocation(randomTop, randomLeft) {
      // to adapt button position to screen size;
      let maxHeight = window.innerHeight;
      let maxWidth = window.innerWidth;

      // calculate new button location
      let top_offset = maxHeight * randomTop;
      let left_offset = maxWidth * randomLeft;
      // set new button location
      let button = document.getElementById("button");
      button.style.top = top_offset + "px";
      button.style.left = left_offset + "px";
    }

    function handleButtonClick() {
      let randomTop = Math.random();
      let randomLeft = Math.random();
      moveButtonToLocation(randomTop, randomLeft);
    }
  </script>
  <!-- end of helper functions -->

  <!-- start of socket logic -->
  <script>
    const socket = io.connect("http://localhost:8080");

    // new player connected
    console.log("[TODO] Add 'player_connected' socket event");

    // current player disconnected
    console.log("[TODO] Add 'player_disconnected' socket event");

    // button was pressed and server emits new_button_location event
    console.log("[TODO] Add 'new_button_location' socket event");

    function handleButtonClick() {
      // emit button_pressed event
      console.log("[TODO] Emit 'button_pressed' socket event");
    }
  </script>
  <!-- end of socket logic -->

  <body>
    <div class="container">
      <button id="button" style="position:absolute;" onclick= "handleButtonClick()">
        Catch Me! :)
      </button>

      <p>Connected players:</p>
      <ul id="playerListDisplay">
        <li>Myself</li>
      </ul>
    </div>
  </body>
</html>