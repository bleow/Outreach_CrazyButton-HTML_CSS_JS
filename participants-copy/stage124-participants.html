<!-- index.html -->
<!--
Stage 1
Purpose: 
- To create a skeletal html page with minimal crazy button logic
Key points:
- Webpage title
- HTML elements
  - Button
  - List
- Manipulating DOM using JS
  - How to change the position of button
- Inline css
  - position:absolute and what it means
-->

<!--
Stage 2
Purpose:
- Add score counting and fix some leftover issues
Key points:
- JS
  - Global variables
  - How to load data from variables into DOM
  - Template literals
  - Conditional (ternary) operator
- Manipulating DOM using JS
  - How to change element values
  - Why do we need to cut the offset to 0.95?
-->

<!DOCTYPE html>
<html lang="en">
  <!-- TODO stage 1: website title -->

  <!-- loads socket.io javascript library -->
  <script>
      <!-- TODO stage 4 -->
  </script>

  <!-- start of helper functions -->
  <script>
    <!-- TODO stage 2: global variable -->
    function clearPlayerList() {
      <!-- TODO stage 2 -->
    }

    function drawPlayerList(playerListData) {
      <!-- TODO stage 2 -->
      // extract playerID and playerScore

      // get the place we want to put the textToDislay

      // create a list item to insert textToDisplay

      // craft the text to display using template literal
      textToDisplay = `${playerID} [${playerScore}]`

      // append text node to display into list element

      // prepend to the top of the list
    }

    function reDrawPlayerList() {
      // TODO stage 4: write this function
    }

    // given randomTop and randomLeft values,
    // move button to new location using random values
    function moveButtonToLocation(randomTop, randomLeft) {
      // to adapt button position to screen size;
      let maxHeight = window.innerHeight;
      let maxWidth = window.innerWidth;
      
      // x and y offset of button relative to the browser
      // screen size
      // randomTop and randomLeft are value between [0, 1] sent from server

      // e.g for laptop with 1200 x 800 resolution and 0.5 for randomTop and randomLeft
      // top_offset = 800 * 0.5 = 400
      // left_offset = 1200 * 0.5 = 600

      // e.g for mobile with 400 x 800 resolution and 0.5 for randomTop and randomLeft
      // top_offset = 400 * 0.5 = 200
      // left_offset = 800 * 0.5 = 400
      <!-- TODO stage 1 -->

      // set new button location
      <!-- TODO stage 1 -->
    }

    function handleButtonClick() {
      <!-- TODO stage 1 -->

      // Clips the value so that the button does not go out of bounds
      <!-- TODO stage 2: sometimes the button goes out of bounds. the value we set should not be too close to 1, e.g. max should be 0.95. hint: ternary operator -->
      moveButtonToLocation(randomTop, randomLeft);

      <!-- TODO stage 4: the logic here should be moved to server side -->
    }
  </script>

  <!-- end of helper functions -->

  <!-- TODO stage 4: code the socket logic -->
  <script>
    // new player connected

    // current player disconnected

    // button was pressed and server emits new_button_location event
  </script>

  <body>
    <div class="container">
      <!-- TODO stage 1: link button to js function on click -->
      <button id="button" style="position:absolute;">
        Catch Me! :)
      </button>

      <p>Connected players: (make a list here)</p>
      <!-- TODO stage 1: make list in html -->
    </div>
  </body>
</html>